{"ast":null,"code":"// /api/new-meetup     is going to be the endpoint url\nconst handler = async (req, res) => {\n  if (req.method === 'POST') {\n    const data = req.body;\n    console.log(req); //\n    // const client = await MongoClient.connect('mongodb+srv://mthrfckr:0YRCwLmXQkFAygzH@cluster0.l1nje.mongodb.net/meetups?retryWrites=true&w=majority')\n    //\n    // const db = client.db\n    //\n    // const meetupsCollection = db.collection('meetups')\n    // const result = await meetupsCollection.insertOne(data)\n    //\n    // console.log(result)\n    //\n    // await client.close()\n    //\n    // res.status(201).json({message: 'Meetup inserted'})\n\n    const {\n      MongoClient\n    } = require('mongodb');\n\n    const uri = \"mongodb+srv://mthrfckr:0YRCwLmXQkFAygzH@cluster0.l1nje.mongodb.net/meetups?retryWrites=true&w=majority\";\n    const client = new MongoClient(uri, {\n      useNewUrlParser: true,\n      useUnifiedTopology: true\n    });\n\n    try {\n      await client.connect();\n      const collection = client.db(\"meetups\").collection(\"meetups\");\n      const result = await collection.insertOne(data);\n      console.log(result);\n      await client.close();\n      res.status(201).json({\n        message: 'Meetup inserted'\n      });\n    } catch (e) {\n      console.log(e.message);\n    }\n  }\n};\n\nexport default handler;","map":null,"metadata":{},"sourceType":"module"}