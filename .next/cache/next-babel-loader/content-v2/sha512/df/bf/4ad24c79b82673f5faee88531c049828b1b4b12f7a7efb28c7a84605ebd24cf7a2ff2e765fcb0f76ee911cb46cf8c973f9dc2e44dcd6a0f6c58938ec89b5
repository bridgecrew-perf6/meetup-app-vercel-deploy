{"ast":null,"code":"// /api/new-meetup     is going to be the endpoint url\nimport { MongoClient } from \"mongodb\";\n\nconst handler = async (req, res) => {\n  if (req.method === 'POST') {\n    const data = req.body;\n    console.log(req); //\n    // const client = await MongoClient.connect('mongodb+srv://mthrfckr:0YRCwLmXQkFAygzH@cluster0.l1nje.mongodb.net/meetups?retryWrites=true&w=majority')\n    //\n    // const db = client.db\n    //\n    // const meetupsCollection = db.collection('meetups')\n    // const result = await meetupsCollection.insertOne(data)\n    //\n    // console.log(result)\n    //\n    // await client.close()\n    //\n    // res.status(201).json({message: 'Meetup inserted'})\n\n    const {\n      MongoClient\n    } = require('mongodb');\n\n    const uri = \"mongodb+srv://mthrfckr:0YRCwLmXQkFAygzH@cluster0.l1nje.mongodb.net/meetups?retryWrites=true&w=majority\";\n    const client = new MongoClient(uri, {\n      useNewUrlParser: true,\n      useUnifiedTopology: true\n    });\n\n    try {\n      await client.connect();\n      const collection = client.db(\"meetups\").collection(\"meetups\");\n      const result = await collection.insertOne(data);\n      console.log(result);\n      await client.close();\n      res.status(201).json({\n        message: 'Meetup inserted'\n      });\n    } catch (e) {\n      console.log(e.message);\n    }\n  }\n};\n\nexport default handler;","map":{"version":3,"sources":["C:/Users/alarovoi/Desktop/projects/udemy-react-course/next-js-bigger/pages/api/new-meetup.js"],"names":["MongoClient","handler","req","res","method","data","body","console","log","require","uri","client","useNewUrlParser","useUnifiedTopology","connect","collection","db","result","insertOne","close","status","json","message","e"],"mappings":"AAAA;AACA,SAAQA,WAAR,QAA0B,SAA1B;;AAEA,MAAMC,OAAO,GAAG,OAAOC,GAAP,EAAYC,GAAZ,KAAoB;AACjC,MAAID,GAAG,CAACE,MAAJ,KAAe,MAAnB,EAA2B;AACvB,UAAMC,IAAI,GAAGH,GAAG,CAACI,IAAjB;AACAC,IAAAA,OAAO,CAACC,GAAR,CAAYN,GAAZ,EAFuB,CAGvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,UAAM;AAAEF,MAAAA;AAAF,QAAkBS,OAAO,CAAC,SAAD,CAA/B;;AACA,UAAMC,GAAG,GAAG,wGAAZ;AACA,UAAMC,MAAM,GAAG,IAAIX,WAAJ,CAAgBU,GAAhB,EAAqB;AAAEE,MAAAA,eAAe,EAAE,IAAnB;AAAyBC,MAAAA,kBAAkB,EAAE;AAA7C,KAArB,CAAf;;AACA,QAAI;AACA,YAAMF,MAAM,CAACG,OAAP,EAAN;AACA,YAAMC,UAAU,GAAGJ,MAAM,CAACK,EAAP,CAAU,SAAV,EAAqBD,UAArB,CAAgC,SAAhC,CAAnB;AACA,YAAME,MAAM,GAAG,MAAMF,UAAU,CAACG,SAAX,CAAqBb,IAArB,CAArB;AACAE,MAAAA,OAAO,CAACC,GAAR,CAAYS,MAAZ;AACA,YAAMN,MAAM,CAACQ,KAAP,EAAN;AACAhB,MAAAA,GAAG,CAACiB,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAACC,QAAAA,OAAO,EAAE;AAAV,OAArB;AACH,KAPD,CAOE,OAAOC,CAAP,EAAU;AACRhB,MAAAA,OAAO,CAACC,GAAR,CAAYe,CAAC,CAACD,OAAd;AACH;AAIJ;AACH,CAnCD;;AAqCA,eAAerB,OAAf","sourcesContent":["// /api/new-meetup     is going to be the endpoint url\r\nimport {MongoClient} from \"mongodb\";\r\n\r\nconst handler = async (req, res) => {\r\n   if (req.method === 'POST') {\r\n       const data = req.body\r\n       console.log(req)\r\n       //\r\n       // const client = await MongoClient.connect('mongodb+srv://mthrfckr:0YRCwLmXQkFAygzH@cluster0.l1nje.mongodb.net/meetups?retryWrites=true&w=majority')\r\n       //\r\n       // const db = client.db\r\n       //\r\n       // const meetupsCollection = db.collection('meetups')\r\n       // const result = await meetupsCollection.insertOne(data)\r\n       //\r\n       // console.log(result)\r\n       //\r\n       // await client.close()\r\n       //\r\n       // res.status(201).json({message: 'Meetup inserted'})\r\n\r\n       const { MongoClient } = require('mongodb');\r\n       const uri = \"mongodb+srv://mthrfckr:0YRCwLmXQkFAygzH@cluster0.l1nje.mongodb.net/meetups?retryWrites=true&w=majority\";\r\n       const client = new MongoClient(uri, { useNewUrlParser: true, useUnifiedTopology: true });\r\n       try {\r\n           await client.connect()\r\n           const collection = client.db(\"meetups\").collection(\"meetups\");\r\n           const result = await collection.insertOne(data)\r\n           console.log(result)\r\n           await client.close();\r\n           res.status(201).json({message: 'Meetup inserted'})\r\n       } catch (e) {\r\n           console.log(e.message)\r\n       }\r\n\r\n\r\n\r\n   }\r\n}\r\n\r\nexport default handler\r\n"]},"metadata":{},"sourceType":"module"}